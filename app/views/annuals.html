<h1 class="page-header">Щорічні звіти
  <small>
    <a class="btn btn-xs btn-success" ng-click="annualsCtrl.addOrEdit()">
      <i class="glyphicon glyphicon-plus"></i>
    </a>
  </small>
</h1>

<div class="form-inline">
  <label class="report-generation">Згенерувати звіт: </label>
  <br>
  <label>Станція: </label>
  <div class="input-group input-group-sm" style="width:200px;">
    <select class="form-control form-control-width" 
          ng-model="station"
          ng-options="station._id as station.name for station in annualsCtrl.stations">
    </select>
  </div>

  <label>Рік: </label>
  <div class="input-group input-group-sm" style="width:100px;">
    <input type="text" class="form-control" placeholder="2015" ng-model="year">
  </div>

  <label>Місяць початку: </label>
  <div class="input-group input-group-sm" style="width:100px;">
    <input type="text" class="form-control" placeholder="2" ng-model="start">
  </div>

  <label>Місяць закінчення: </label>
  <div class="input-group input-group-sm" style="width:200px;">
    <input type="text" class="form-control" placeholder="8" ng-model="end">
    <span class="input-group-btn">
      <a ng-href="annuals/day?station={{station}}&year={{year || 2015}}&start={{start || 2}}&end={{end || 8}}" class="btn btn-default">Генерувати</a>
    </span>
  </div>
</div>
<hr>

<div class="table-responsive table-responsive-heightened">
  <table class="table table-hovered">
    <thead>
      <tr>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('station_id')}" 
            ng-click="annualsCtrl.orderBy('station_id')">
            Станція
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('station_id')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('year')}" 
            ng-click="annualsCtrl.orderBy('year')">
            Рік
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('year')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('number')}" 
            ng-click="annualsCtrl.orderBy('number')">
            Порядковий №
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('number')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('angle_continental')}" 
            ng-click="annualsCtrl.orderBy('angle_continental')">
            Континентальний кут
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('angle_continental')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('angle_shore')}" 
            ng-click="annualsCtrl.orderBy('angle_shore')">
            Береговий кут
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('angle_shore')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('page_station')}" 
            ng-click="annualsCtrl.orderBy('page_station')">
            Сторінка станції
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('page_station')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('page_observation')}" 
            ng-click="annualsCtrl.orderBy('page_observation')">
            Сторінка спостережень
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('page_observation')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('comment')}" 
            ng-click="annualsCtrl.orderBy('comment')">
            Примітка
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('comment')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('snow_melting')}" 
            ng-click="annualsCtrl.orderBy('snow_melting')">
            Схід снігу
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('snow_melting')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('observation_begin_g')}" 
            ng-click="annualsCtrl.orderBy('observation_begin_g')">
            Початок спостережень майданчику
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('observation_begin_g')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('observation_end_g')}" 
            ng-click="annualsCtrl.orderBy('observation_end_g')">
            Закінчення спостережень майданчику
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('observation_end_g')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('water_freezing')}" 
            ng-click="annualsCtrl.orderBy('water_freezing')">
            Замерзання води
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('water_freezing')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('ice_clean')}" 
            ng-click="annualsCtrl.orderBy('ice_clean')">
            Очищення від льоду
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('ice_clean')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('observation_begin_w')}" 
            ng-click="annualsCtrl.orderBy('observation_begin_w')">
            Початок спостережень водойми
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('observation_begin_w')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('observation_end_w')}" 
            ng-click="annualsCtrl.orderBy('observation_end_w')">
            Закінчення спостережень водойми
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('observation_end_w')"></i>
        </th>
        <th ng-class="{'main-order': annualsCtrl.isOrderedBy('ice_cover')}" 
            ng-click="annualsCtrl.orderBy('ice_cover')">
            Встановлення льодового покриву
            <i class="glyphicon" ng-class="{'glyphicon-menu-down': !!annualsCtrl.reverse, 'glyphicon-menu-up': !annualsCtrl.reverse}" ng-if="annualsCtrl.isOrderedBy('ice_cover')"></i>
        </th>
        <th>Дія</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <select class="form-control form-control-width" 
            ng-model="annualsCtrl.filter.station_id" 
            ng-options="station._id as station.name for station in annualsCtrl.stations"></select>
        </td>
        <td>
          <select class="form-control form-control-width" 
            ng-model="annualsCtrl.filter.year" 
            ng-options="year as year for year in annualsCtrl.Dates.years"></select>
        </td>
        <td>
          <input class="form-control form-control-width" ng-model="annualsCtrl.filter.number">
        </td>
        <td>
          <input class="form-control form-control-width" ng-model="annualsCtrl.filter.angle_continental">
        </td>
        <td>
          <input class="form-control form-control-width" ng-model="annualsCtrl.filter.angle_shore">
        </td>
        <td>
          <input class="form-control form-control-width" ng-model="annualsCtrl.filter.page_station">
        </td>
        <td>
          <input class="form-control form-control-width" ng-model="annualsCtrl.filter.page_observation">
        </td>
        <td>
          <input class="form-control form-control-width" ng-model="annualsCtrl.filter.comment">
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.snow_melting"
                 is-open="annualsCtrl.isOpen.snow_melting">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'snow_melting')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.observation_begin_g"
                 is-open="annualsCtrl.isOpen.observation_begin_g">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'observation_begin_g')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.observation_end_g"
                 is-open="annualsCtrl.isOpen.observation_end_g">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'observation_end_g')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.water_freezing"
                 is-open="annualsCtrl.isOpen.water_freezing">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'water_freezing')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.ice_clean"
                 is-open="annualsCtrl.isOpen.ice_clean">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'ice_clean')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.observation_begin_w"
                 is-open="annualsCtrl.isOpen.observation_begin_w">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'observation_begin_w')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.observation_end_w"
                 is-open="annualsCtrl.isOpen.observation_end_w">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'observation_end_w')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <p class="input-group">
            <input class="form-control form-control-width"
                 datepicker-popup
                 ng-model="annualsCtrl.filter.ice_cover"
                 is-open="annualsCtrl.isOpen.ice_cover">
            <span class="input-group-btn">
              <button class="btn btn-default" ng-click="annualsCtrl.open($event, 'ice_cover')">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </p>
        </td>
        <td>
          <button class="btn btn-success" ng-click="annualsCtrl.clearFilter()">Очистити</button>
        </td>
      </tr>
      <tr ng-repeat="annual in annualsCtrl.annuals | filter:annualsCtrl.filter | orderBy:annualsCtrl.order:annualsCtrl.reverse">
        <td ng-bind="annualsCtrl.station(annual.station_id)"></td>
        <td ng-bind="annual.year"></td>
        <td ng-bind="annual.number"></td>
        <td ng-bind="annual.angle_continental"></td>
        <td ng-bind="annual.angle_shore"></td>
        <td ng-bind="annual.page_station"></td>
        <td ng-bind="annual.page_observation"></td>
        <td ng-bind="annual.comment"></td>
        <td ng-bind="annual.snow_melting | date"></td>
        <td ng-bind="annual.observation_begin_g | date"></td>
        <td ng-bind="annual.observation_end_g | date"></td>
        <td ng-bind="annual.water_freezing | date"></td>
        <td ng-bind="annual.ice_clean | date"></td>
        <td ng-bind="annual.observation_begin_w | date"></td>
        <td ng-bind="annual.observation_end_w | date"></td>
        <td ng-bind="annual.ice_cover | date"></td>
        <td>
          <div class="btn-group">
            <button class="btn btn-xs btn-primary" ng-click="annualsCtrl.addOrEdit(annual)">
              <i class="glyphicon glyphicon-pencil"></i>
            </button>
            <button class="btn btn-xs btn-danger" ng-click="annualsCtrl.delete(annual)">
              <i class="glyphicon glyphicon-trash"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>